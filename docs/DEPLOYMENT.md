# Deployment Guide

## Render (Recommended - Free)

### Prerequisites
- GitHub account
- Render account (render.com)

### Steps

1. **Push your code to GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git
   git push -u origin main
   ```

2. **Deploy to Render**
   - Go to [render.com](https://render.com) and sign up/login
   - Click **New** → **Web Service**
   - Connect your GitHub account
   - Select your repository
   - Render will auto-detect the `render.yaml` configuration:
     - **Build Command**: `npm install && npm run build`
     - **Start Command**: `npm start`
   - Click **Create Web Service**

3. **Wait for deployment** (5-10 minutes first time)

4. **Access your game** at `https://your-service-name.onrender.com`

### Free Tier Limitations

- **Sleep after 15 minutes**: Service spins down after inactivity
- **Cold start**: Takes ~30 seconds to wake up
- **750 hours/month**: Enough for one always-on service

---

## Environment Variables (Optional)

If you need custom configuration, add these in Render dashboard:

| Variable | Description | Example |
|----------|-------------|---------|
| `PORT` | Server port (auto-set by Render) | 10000 |
| `NODE_ENV` | Environment | production |
| `CLIENT_URL` | For CORS (optional) | https://yourdomain.com |

---

## Alternative Platforms

### Railway

```bash
npm install -g @railway/cli
railway login
railway init
railway up
```

### Fly.io (Requires credit card)

```bash
curl -L https://fly.io/install.sh | sh
fly auth login
fly launch
fly deploy
```

### Glitch (No credit card, always free)

1. Go to [glitch.com](https://glitch.com)
2. New Project → Import from GitHub
3. Paste your repo URL
4. Game runs at `https://your-project.glitch.me`

---

## Custom Domain (Optional)

On Render:
1. Go to your service settings
2. Click **Custom Domains**
3. Add your domain
4. Update DNS records as instructed

---

## Troubleshooting Deployment

### Build fails
- Check Render logs for errors
- Ensure `npm run build` works locally
- Verify all dependencies are in package.json

### WebSocket connection fails
- Render supports WebSockets by default
- Check browser console for connection errors
- Verify CORS settings in server/index.js

### Game loads but shows "Connection timeout"
- Service may be sleeping (wait 30s)
- Check server logs in Render dashboard
- Verify server started correctly

### Static files not loading
- Ensure `client/dist` is generated by build
- Check that server/index.js serves static files
- Verify paths in Express static middleware
